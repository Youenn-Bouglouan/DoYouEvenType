<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Do you even type, Bro?</title>
    <meta name="description" content="Stuff about Types!">
    <meta name="author" content="Youenn Bouglouan">
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <script src="//code.jquery.com/jquery-1.8.0.js"></script>
    <script src="//code.jquery.com/ui/1.8.23/jquery-ui.js"></script>
    <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/css/bootstrap-combined.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/night.css" id="theme">
    <link type="text/css" rel="stylesheet" href="fsharp.formatting/styles/style.css" />
    <link type="text/css" rel="stylesheet" href="fsharp.formatting/styles/deedle.css" />
    <link type="text/css" rel="stylesheet" href="css/custom.css" />
    <script src="fsharp.formatting/styles/tips.js" type="text/javascript"></script>
    <!-- For syntax highlighting -->
    <link rel="stylesheet" href="lib/css/zenburn.css">
    <link rel="stylesheet" href="css/fsreveal.css">
    <!-- If the query includes 'print-pdf', include the PDF print sheet -->
    <script>
			if( window.location.search.match( /print-pdf/gi ) ) {
				var link = document.createElement( 'link' );
				link.rel = 'stylesheet';
				link.type = 'text/css';
				link.href = 'css/print/pdf.css';
				document.getElementsByTagName( 'head' )[0].appendChild( link );
			}
    </script>
    <!--[if lt IE 9]>
    <script src="lib/js/html5shiv.js"></script>
    <![endif]-->
    <script language="javascript" type="text/javascript">
        function init()
        {
            websocket = new WebSocket("ws://"+window.location.host+"/websocket");
            websocket.onmessage = function(evt) { location.reload(); };
        }
        window.addEventListener("load", init, false);
    </script>
</head>
<body>
    <div class="reveal">
        <div class="tip" id="fs1">val x : int<br /><br />Full name: index.x</div>
<div class="tip" id="fs2">val y : int<br /><br />Full name: index.y</div>
<div class="tip" id="fs3">Multiple items<br />val char : value:&#39;T -&gt; char (requires member op_Explicit)<br /><br />Full name: Microsoft.FSharp.Core.Operators.char<br /><br />--------------------<br />type char = System.Char<br /><br />Full name: Microsoft.FSharp.Core.char</div>
<div class="tip" id="fs4">Multiple items<br />val int : value:&#39;T -&gt; int (requires member op_Explicit)<br /><br />Full name: Microsoft.FSharp.Core.Operators.int<br /><br />--------------------<br />type int = int32<br /><br />Full name: Microsoft.FSharp.Core.int<br /><br />--------------------<br />type int&lt;&#39;Measure&gt; = int<br /><br />Full name: Microsoft.FSharp.Core.int&lt;_&gt;</div>
<div class="tip" id="fs5">Multiple items<br />val int16 : value:&#39;T -&gt; int16 (requires member op_Explicit)<br /><br />Full name: Microsoft.FSharp.Core.Operators.int16<br /><br />--------------------<br />type int16 = System.Int16<br /><br />Full name: Microsoft.FSharp.Core.int16<br /><br />--------------------<br />type int16&lt;&#39;Measure&gt; = int16<br /><br />Full name: Microsoft.FSharp.Core.int16&lt;_&gt;</div>
<div class="tip" id="fs6">Multiple items<br />val string : value:&#39;T -&gt; string<br /><br />Full name: Microsoft.FSharp.Core.Operators.string<br /><br />--------------------<br />type string = System.String<br /><br />Full name: Microsoft.FSharp.Core.string</div>
<div class="tip" id="fs7">module String<br /><br />from Microsoft.FSharp.Core</div>
<div class="tip" id="fs8">Multiple items<br />val double : value:&#39;T -&gt; double (requires member op_Explicit)<br /><br />Full name: Microsoft.FSharp.Core.ExtraTopLevelOperators.double<br /><br />--------------------<br />type double = System.Double<br /><br />Full name: Microsoft.FSharp.Core.double</div>
<div class="tip" id="fs9">type bool = System.Boolean<br /><br />Full name: Microsoft.FSharp.Core.bool</div>
<div class="tip" id="fs10">Multiple items<br />module List<br /><br />from Microsoft.FSharp.Collections<br /><br />--------------------<br />type List&lt;&#39;T&gt; =<br />&#160;&#160;| ( [] )<br />&#160;&#160;| ( :: ) of Head: &#39;T * Tail: &#39;T list<br />&#160;&#160;interface IEnumerable<br />&#160;&#160;interface IEnumerable&lt;&#39;T&gt;<br />&#160;&#160;member GetSlice : startIndex:int option * endIndex:int option -&gt; &#39;T list<br />&#160;&#160;member Head : &#39;T<br />&#160;&#160;member IsEmpty : bool<br />&#160;&#160;member Item : index:int -&gt; &#39;T with get<br />&#160;&#160;member Length : int<br />&#160;&#160;member Tail : &#39;T list<br />&#160;&#160;static member Cons : head:&#39;T * tail:&#39;T list -&gt; &#39;T list<br />&#160;&#160;static member Empty : &#39;T list<br /><br />Full name: Microsoft.FSharp.Collections.List&lt;_&gt;</div>
<div class="tip" id="fs11">val id : x:&#39;T -&gt; &#39;T<br /><br />Full name: Microsoft.FSharp.Core.Operators.id</div>
<div class="tip" id="fs12">module Option<br /><br />from Microsoft.FSharp.Core</div>
<div class="tip" id="fs13">union case Option.Some: Value: &#39;T -&gt; Option&lt;&#39;T&gt;</div>
<div class="tip" id="fs14">union case Option.None: Option&lt;&#39;T&gt;</div>
<div class="tip" id="fs15">val enum : value:int32 -&gt; &#39;U (requires enum)<br /><br />Full name: Microsoft.FSharp.Core.Operators.enum</div>
<div class="tip" id="fs16">type &#39;T option = Option&lt;&#39;T&gt;<br /><br />Full name: Microsoft.FSharp.Core.option&lt;_&gt;</div>

        <!-- Any section element inside of this container is displayed as a slide -->
        <div class="slides">
            <section >
<h2>Do you even type, Bro?</h2>
</section>
<section >
<section >
<h3><ct>Who am I?</ct></h3>
<p>Youenn Bouglouan</p>
<p>C# by day, F# by night</p>
<p><a href="http://www.ybouglouan.pl">http://www.ybouglouan.pl</a></p>
</section>
<section >
<h3><ct>Why today's topic?</ct></h3>
<p class="fragment fade-in">Waterfall vs Agile</p>
<p class="fragment fade-in">Java vs C#</p>
<p class="fragment fade-in">PC vs Mac (vs Linux)</p>
<p class="fragment fade-in">Object Oriented vs Functional</p>
<ct><p class="fragment fade-in">Weakly Typed vs Strongly Typed</p></ct>
</section>
<section >
<h3><ct>Who is this presentation for?</ct></h3>
<p class="fragment fade-in">Developers -> get a better idea of what's out there</p>
<p class="fragment fade-in">QA Specialists -> understand why there are bugs and issues</p>
</section>
</section>
<section >
<h4>Part I</h4>
<hr />
<h3><ct>Typing 101</ct></h3>
</section>
<section >
<h3>What's a <ct>Type</ct>?</h3>
<p>A way to represent <ct>data</ct> or <ct>behavior</ct> within a programming language</p>
<ul>
<li><ct>primitive types</ct> (int, bool, char, float...)</li>
<li><ct>product types</ct> (classes, records, objects, tuples...)</li>
<li><ct>sum types</ct> (unions but not only... we'll see those later!)</li>
<li><ct>sets</ct> (lists, arrays, maps, dictionaries...)</li>
<li><ct>functions</ct>(!)</li>
<li><ct>interfaces</ct>(!)</li>
</ul>
</section>
<section >
<h3>What's a <ct>Type System</ct>?</h3>
<p>For a given language:</p>
<ul>
<li>defines the <ct>kind of types</ct> available</li>
<li><ct>maps types</ct> to the various <ct>constructs</ct> (expressions, variables, functions...  )</li>
<li>determines how types <ct>interact</ct> with each other</li>
<li>sets the <ct>rules</ct> that make a type either valid or invalid</li>
</ul>
</section>
<section >
<section >
<h3><ct>Typing:</ct></h3>
<h3>Dynamic vs Static</h3>
</section>
<section >
<h3><ct>Dynamic</ct></h3>
<p>types are checked at <ct>runtime</ct> -&gt; runtime errors</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// Python</span>
<span onmouseout="hideTip(event, 'fs1', 18)" onmouseover="showTip(event, 'fs1', 18)" class="i">x</span> <span class="o">=</span> <span class="n">10</span>
<span onmouseout="hideTip(event, 'fs2', 19)" onmouseover="showTip(event, 'fs2', 19)" class="i">y</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs1', 20)" onmouseover="showTip(event, 'fs1', 20)" class="i">x</span> <span class="o">+</span> <span class="n">1</span> <span class="c">// Ok</span>
<span class="i">z</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs1', 21)" onmouseover="showTip(event, 'fs1', 21)" class="i">x</span> <span class="o">+</span> <span class="s">&quot;1&quot;</span> <span class="c">// Runtime error</span>
<span class="c">// TypeError: unsupported operand type(s) for +: &#39;int&#39; and &#39;str&#39;</span>
</code></pre></td>
</tr>
</table>
</section>
<section >
<h3><ct>Static</ct></h3>
<p>Types are checked at <ct>compile time</ct> -&gt; compilation errors</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// F#</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs1', 5)" onmouseover="showTip(event, 'fs1', 5)" class="i">x</span> <span class="o">=</span> <span class="n">10</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs2', 6)" onmouseover="showTip(event, 'fs2', 6)" class="i">y</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs1', 7)" onmouseover="showTip(event, 'fs1', 7)" class="i">x</span> <span class="o">+</span> <span class="n">1</span> <span class="c">// Ok</span>
<span class="k">let</span> <span class="i">z</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs1', 8)" onmouseover="showTip(event, 'fs1', 8)" class="i">x</span> <span class="o">+</span> <span class="s">&quot;1&quot;</span> <span class="c">// Compiler error</span>
<span class="c">// The type &#39;string&#39; does not match the type &#39;int&#39;</span>
</code></pre></td>
</tr>
</table>
</section>
</section>
<section >
<section >
<h3><ct>Typing:</ct></h3>
<h3>Weak vs Strong</h3>
<p>Not the same as Dynamic vs Static!</p>
</section>
<section >
<h3><ct>Weak</ct></h3>
<p>type checking is not (very) strict</p>
<p>implicit conversions (usually)</p>
<p>little guarantees on the program's correctness</p>
</section>
<section >
<h3><ct>Weak</ct> typing in a <ct>dynamic</ct> language</h3>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
<span class="l">8: </span>
<span class="l">9: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// JavaScript</span>
<span class="s">&#39;1&#39;</span> <span class="o">+</span> <span class="s">&#39;2&#39;</span> <span class="c">// returns the string &quot;12&quot;</span>
<span class="s">&#39;1&#39;</span> <span class="o">-</span> <span class="s">&#39;2&#39;</span> <span class="c">// returns the number -1</span>
<span class="s">&#39;1&#39;</span> <span class="o">*</span> <span class="s">&#39;2&#39;</span> <span class="c">// returns the number 2</span>
<span class="i">var</span> <span class="i">myObject</span> <span class="o">=</span> { <span class="i">valueOf</span><span class="o">:</span> <span class="k">function</span> () { <span class="k">return</span> <span class="n">3</span> }} <span class="c">// myObject is an Object</span>
<span class="s">&#39;1&#39;</span> <span class="o">+</span> <span class="i">myObject</span> <span class="c">// returns a string: &quot;13&quot;</span>
<span class="n">1</span> <span class="o">+</span> <span class="i">myObject</span> <span class="c">// returns a string: 4</span>
[] <span class="o">+</span> {} <span class="c">// returns an Object</span>
{} <span class="o">+</span> [] <span class="c">// returns the number 0... wait whaaaaaaaaaaaaaaaaaaaat?</span>
</code></pre></td>
</tr>
</table>
</section>
<section >
<h3><ct>Weak</ct> typing in a <ct>static</ct> language - 1</h3>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
<span class="l">8: </span>
<span class="l">9: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// C#</span>
<span class="i">var</span> <span onmouseout="hideTip(event, 'fs1', 9)" onmouseover="showTip(event, 'fs1', 9)" class="i">x</span> <span class="o">=</span> <span class="n">2</span> <span class="o">+</span> <span class="n">2.0</span>; <span class="c">// x is a double with value 4</span>
<span class="i">var</span> <span onmouseout="hideTip(event, 'fs2', 10)" onmouseover="showTip(event, 'fs2', 10)" class="i">y</span> <span class="o">=</span> <span class="n">2.1</span> <span class="o">+</span> <span class="s">&quot;2&quot;</span>; <span class="c">// y is a string with value &quot;2.12&quot;</span>

<span onmouseout="hideTip(event, 'fs3', 11)" onmouseover="showTip(event, 'fs3', 11)" class="i">char</span> <span class="i">c</span> <span class="o">=</span> <span class="s">&#39;a&#39;</span>;
<span onmouseout="hideTip(event, 'fs4', 12)" onmouseover="showTip(event, 'fs4', 12)" class="i">int</span> <span class="i">i</span> <span class="o">=</span> <span class="i">c</span>; <span class="c">// i is an integer with value 97</span>

<span onmouseout="hideTip(event, 'fs4', 13)" onmouseover="showTip(event, 'fs4', 13)" class="i">int</span> <span onmouseout="hideTip(event, 'fs1', 14)" onmouseover="showTip(event, 'fs1', 14)" class="i">x</span> <span class="o">=</span> <span class="n">100000</span>;
<span onmouseout="hideTip(event, 'fs4', 15)" onmouseover="showTip(event, 'fs4', 15)" class="i">int</span> <span onmouseout="hideTip(event, 'fs2', 16)" onmouseover="showTip(event, 'fs2', 16)" class="i">y</span> <span class="o">=</span> (<span class="i">short</span>) <span onmouseout="hideTip(event, 'fs1', 17)" onmouseover="showTip(event, 'fs1', 17)" class="i">x</span>; <span class="c">// y is an integer with value -31072 due to integer overflow</span>
</code></pre></td>
</tr>
</table>
</section>
<section >
<h3><ct>Weak</ct> typing in a <ct>static</ct> language - 2</h3>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// C#</span>
<span class="k">public</span> <span class="k">class</span> <span class="i">Animal</span> {}
<span class="k">public</span> <span class="k">class</span> <span class="i">Reptile</span> <span class="o">:</span> <span class="i">Animal</span> {}
<span class="k">public</span> <span class="k">class</span> <span class="i">Mammal</span> <span class="o">:</span> <span class="i">Animal</span> {}

<span class="k">public</span> <span class="k">void</span> <span class="i">Test</span>(<span class="i">Animal</span> <span class="i">a</span>)
{
  <span class="i">var</span> <span class="i">r</span> <span class="o">=</span> (<span class="i">Reptile</span>) <span class="i">a</span>;
}

<span class="i">Test</span>(<span class="k">new</span> <span class="i">Mammal</span>());
<span class="c">// Run-time exception: Unable to cast object of type &#39;Mammal&#39; to type &#39;Reptile&#39;.</span>
</code></pre></td>
</tr>
</table>
</section>
<section >
<h3><ct>Strong</ct></h3>
<p>Type checking is strict(er)</p>
<p>program's correctness is easier to prove (well, in theory)</p>
<p>conversions must be explicit</p>
</section>
<section >
<h3><ct>Strong</ct> typing in a <ct>dynamic</ct> language</h3>
<p>Back to our first example in Python!</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// Python</span>
<span onmouseout="hideTip(event, 'fs1', 18)" onmouseover="showTip(event, 'fs1', 18)" class="i">x</span> <span class="o">=</span> <span class="n">10</span>
<span onmouseout="hideTip(event, 'fs2', 19)" onmouseover="showTip(event, 'fs2', 19)" class="i">y</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs1', 20)" onmouseover="showTip(event, 'fs1', 20)" class="i">x</span> <span class="o">+</span> <span class="n">1</span> <span class="c">// Ok</span>
<span class="i">z</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs1', 21)" onmouseover="showTip(event, 'fs1', 21)" class="i">x</span> <span class="o">+</span> <span class="s">&quot;1&quot;</span> <span class="c">// Runtime error</span>
<span class="c">// TypeError: unsupported operand type(s) for +: &#39;int&#39; and &#39;str&#39;</span>
</code></pre></td>
</tr>
</table>
</section>
<section >
<h3><ct>Strong</ct> typing in a <ct>static</ct> language</h3>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// F#</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs1', 22)" onmouseover="showTip(event, 'fs1', 22)" class="i">x</span> <span class="o">=</span> <span class="n">2</span> <span class="o">+</span> <span class="n">2.0</span> <span class="c">// Compiler error, The type &#39;float&#39; does not match the type &#39;int&#39;</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs2', 23)" onmouseover="showTip(event, 'fs2', 23)" class="i">y</span> <span class="o">=</span> <span class="n">2.1</span> <span class="o">+</span> <span class="s">&quot;2&quot;</span> <span class="c">// Compiler error, The type &#39;string&#39; does not match the type &#39;float&#39;</span>

<span class="k">let</span> <span class="i">c</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs3', 24)" onmouseover="showTip(event, 'fs3', 24)" class="i">char</span> <span class="o">=</span> <span class="s">&#39;a&#39;</span>
<span class="k">let</span> <span class="i">i</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs4', 25)" onmouseover="showTip(event, 'fs4', 25)" class="i">int</span> <span class="o">=</span> <span class="i">c</span> <span class="c">// Compiler error, expected to have type &#39;int&#39; but here has type &#39;char&#39;</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs1', 26)" onmouseover="showTip(event, 'fs1', 26)" class="i">x</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs4', 27)" onmouseover="showTip(event, 'fs4', 27)" class="i">int</span> <span class="o">=</span> <span class="n">100000</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs2', 28)" onmouseover="showTip(event, 'fs2', 28)" class="i">y</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs4', 29)" onmouseover="showTip(event, 'fs4', 29)" class="i">int</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs5', 30)" onmouseover="showTip(event, 'fs5', 30)" class="i">int16</span> <span onmouseout="hideTip(event, 'fs1', 31)" onmouseover="showTip(event, 'fs1', 31)" class="i">x</span> <span class="c">// Compiler error, expected to have type &#39;int&#39; but here has type &#39;int16&#39;</span>
<span class="k">let</span> <span class="i">z</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs5', 32)" onmouseover="showTip(event, 'fs5', 32)" class="i">int16</span> <span onmouseout="hideTip(event, 'fs1', 33)" onmouseover="showTip(event, 'fs1', 33)" class="i">x</span> <span class="c">// this compiles and runs, but the result still is -31072</span>
</code></pre></td>
</tr>
</table>
</section>
</section>
<section >
<section >
<h3><ct>Typing:</ct></h3>
<h3>Nominal vs Structural</h3>
<p>applies to static typing</p>
</section>
<section >
<h3><ct>Nominal</ct></h3>
<p>Very popular in mainstream languages like C#, C++, or Java</p>
<p>Types are identified by their respective <ct>names</ct></p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// C#</span>
<span class="k">class</span> <span class="i">Employee</span> { <span class="k">public</span> <span onmouseout="hideTip(event, 'fs6', 34)" onmouseover="showTip(event, 'fs6', 34)" class="i">string</span> <span class="i">Name</span>; }
<span class="k">class</span> <span class="i">Animal</span> { <span class="k">public</span> <span onmouseout="hideTip(event, 'fs6', 35)" onmouseover="showTip(event, 'fs6', 35)" class="i">string</span> <span class="i">Name</span>; }

<span onmouseout="hideTip(event, 'fs6', 36)" onmouseover="showTip(event, 'fs6', 36)" class="i">string</span> <span class="i">Hire</span>(<span class="i">Employee</span> <span class="i">employee</span>)
{
  <span class="c">// some fancy logic here...</span>
  <span class="k">return</span> <span class="i">employee</span><span class="o">.</span><span class="i">Name</span>;
}

<span class="i">var</span> <span class="i">name</span> <span class="o">=</span> <span class="i">Hire</span>(<span class="k">new</span> <span class="i">Employee</span>()); <span class="c">// This works</span>
<span class="i">var</span> <span class="i">name</span> <span class="o">=</span> <span class="i">Hire</span>(<span class="k">new</span> <span class="i">Animal</span>()); <span class="c">// This doesn&#39;t as &#39;Hire&#39; explicitly expects an &#39;Employee&#39;</span>
</code></pre></td>
</tr>
</table>
</section>
<section >
<h3><ct>Structural</ct></h3>
<p>Also called row polymorphism</p>
<p>Types are identified by their respective <ct>structures</ct> and <ct>properties</ct></p>
<p>Present under different forms in Elm, Go, TypeScript, Scala, OCaml, Haskell...</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
<span class="l">8: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// Elm</span>
<span class="i">hire</span><span class="o">:</span> { <span class="i">name</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs7', 37)" onmouseover="showTip(event, 'fs7', 37)" class="i">String</span> } <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs7', 38)" onmouseover="showTip(event, 'fs7', 38)" class="i">String</span>
<span class="i">hire</span> <span class="i">entity</span> <span class="o">=</span>
  <span class="c">// Some fancy logic here...</span>
  <span class="i">entity</span><span class="o">.</span><span class="i">name</span>

<span class="i">hire</span> { <span class="i">name</span> <span class="o">=</span> <span class="s">&quot;Tomek Nowak&quot;</span> } <span class="c">// This works, returns the string &#39;Tomek Nowak&#39;</span>
<span class="i">hire</span> { <span class="i">name</span> <span class="o">=</span> <span class="s">&quot;Garfield&quot;</span> } <span class="c">// This also works, returns the string &#39;Garfield&#39;</span>
</code></pre></td>
</tr>
</table>
</section>
<section >
<p>But there's more...</p>
<h3>Structural <ct>subtyping</ct></h3>
<p>Beware the awesomeness!</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// Elm</span>
<span class="k">type</span> <span class="i">alias</span> <span class="i">TypeWithName</span> <span class="i">a</span> <span class="o">=</span> { <span class="i">a</span> | <span class="i">name</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs7', 39)" onmouseover="showTip(event, 'fs7', 39)" class="i">String</span> }

<span class="i">hire</span><span class="o">:</span> <span class="i">TypeWithName</span> <span class="i">a</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs7', 40)" onmouseover="showTip(event, 'fs7', 40)" class="i">String</span>
<span class="i">hire</span> <span class="i">entity</span> <span class="o">=</span>
  <span class="c">// Some fancy logic here...</span>
  <span class="i">entity</span><span class="o">.</span><span class="i">name</span>

<span class="i">hire</span> { <span class="i">name</span> <span class="o">=</span> <span class="s">&quot;Tomek Nowak&quot;</span>, <span class="i">age</span> <span class="o">=</span> <span class="n">25</span>, <span class="i">gender</span> <span class="o">=</span> <span class="s">&quot;male&quot;</span> } <span class="c">// This still works!</span>
<span class="i">hire</span> { <span class="i">name</span> <span class="o">=</span> <span class="s">&quot;Garfield&quot;</span>, <span class="i">canFly</span> <span class="o">=</span> <span class="i">False</span>, <span class="i">hasPaws</span> <span class="o">=</span> <span class="i">True</span> } <span class="c">// And this works too!</span>
</code></pre></td>
</tr>
</table>
<p>The actual structure of the types is checked as compile-time,
making this super safe while giving a dynamic feel to the language</p>
</section>
<section >
<h3><ct>Structural</ct> typing</h3>
<h4>for <ct>implicit</ct> interface implementation</h4>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
<span class="l">19: </span>
<span class="l">20: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// Go</span>
<span class="k">type</span> <span class="i">Stringer</span> <span class="k">interface</span> {
  <span onmouseout="hideTip(event, 'fs7', 41)" onmouseover="showTip(event, 'fs7', 41)" class="i">String</span>() <span onmouseout="hideTip(event, 'fs6', 42)" onmouseover="showTip(event, 'fs6', 42)" class="i">string</span>
}

<span class="i">import</span> (<span class="s">&quot;fmt&quot;</span>)

<span class="k">type</span> <span class="i">User</span> <span class="k">struct</span> {
  <span class="i">name</span> <span onmouseout="hideTip(event, 'fs6', 43)" onmouseover="showTip(event, 'fs6', 43)" class="i">string</span>
}

<span class="i">func</span> (<span class="i">user</span> <span class="i">User</span>) <span onmouseout="hideTip(event, 'fs7', 44)" onmouseover="showTip(event, 'fs7', 44)" class="i">String</span>() <span onmouseout="hideTip(event, 'fs6', 45)" onmouseover="showTip(event, 'fs6', 45)" class="i">string</span> {
  <span class="k">return</span> <span class="i">fmt</span><span class="o">.</span><span class="i">Sprintf</span>(<span class="s">&quot;User: name = %s&quot;</span>, <span class="i">user</span><span class="o">.</span><span class="i">name</span>)
}

<span class="i">func</span> <span class="i">main</span>() {
  <span class="i">user</span> <span class="o">:=</span> <span class="i">User</span>{<span class="i">name</span><span class="o">:</span> <span class="s">&quot;Tomek Nowak&quot;</span>}
  <span class="i">fmt</span><span class="o">.</span><span class="i">Println</span>(<span class="i">user</span>) <span class="c">// fmt.Println(...) takes a Stringer interface as parameter</span>
  <span class="c">//prints &#39;User: name = Tomek Nowak&#39;</span>
}
</code></pre></td>
</tr>
</table>
</section>
</section>
<section >
<h3><ct>Duck</ct> Typing</h3>
<quote>If it looks like a duck, swims like a duck, and quacks like a duck, then it probably is a duck.</quote>
<p>basically the same as structural typing, but at <ct>runtime</ct>!</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// Python</span>
<span class="k">class</span> <span class="i">Duck</span><span class="o">:</span>
    <span class="i">def</span> <span class="i">quack</span>(<span class="i">self</span>)<span class="o">:</span>
        <span class="i">print</span>(<span class="s">&quot;Quack!&quot;</span>)

<span class="k">class</span> <span class="i">Dog</span><span class="o">:</span>
    <span class="i">def</span> <span class="i">bark</span>(<span class="i">self</span>)<span class="o">:</span>
        <span class="i">print</span>(<span class="s">&quot;Woooof!&quot;</span>)

<span class="i">def</span> <span class="i">lets_quack</span>(<span class="i">animal</span>)<span class="o">:</span>
  <span class="i">animal</span><span class="o">.</span><span class="i">quack</span>()

<span class="i">donaldTusk</span> <span class="o">=</span> <span class="i">Duck</span>()
<span class="i">rex</span> <span class="o">=</span> <span class="i">Dog</span>()

<span class="i">lets_quack</span>(<span class="i">donaldTusk</span>) <span class="c">// prints &#39;Quack!&#39;</span>
<span class="i">lets_quack</span>(<span class="i">rex</span>) <span class="c">// runtime error!</span>
</code></pre></td>
</tr>
</table>
</section>
<section >
<section >
<h3>A word about <ct>Type Inference</ct></h3>
<p><img src="images/java-type-inference-v2.png" style="background: white;" width=500 />
<small><a href="https://twitter.com/java/status/967463386609954816&lt;/small&gt;">https://twitter.com/java/status/967463386609954816</small></a></p>
</section>
<section >
<p><img src="images/java-type-inference-com1-v2.png" style="background: white;" width=540 />
<img src="images/java-type-inference-com2-v2.png" style="background: white;" width=540 />
<img src="images/java-type-inference-com4-v2.png" style="background: white;" width=540 /></p>
</section>
<section >
<h3>Basic <ct>Type Inference</ct></h3>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// C++</span>
<span class="k">void</span> <span class="i">withoutTypeInference</span>(<span class="i">std</span><span class="o">::</span><span class="i">vector</span><span class="o">&lt;</span><span class="i">std</span><span class="o">::</span><span class="i">complex</span><span class="o">&lt;</span><span onmouseout="hideTip(event, 'fs8', 46)" onmouseover="showTip(event, 'fs8', 46)" class="i">double</span><span class="o">&gt;</span><span class="o">&gt;</span> <span class="o">&amp;</span> <span class="i">myVector</span>)
{
  <span class="i">std</span><span class="o">::</span><span class="i">vector</span><span class="o">&lt;</span><span class="i">std</span><span class="o">::</span><span class="i">complex</span><span class="o">&lt;</span><span onmouseout="hideTip(event, 'fs8', 47)" onmouseover="showTip(event, 'fs8', 47)" class="i">double</span><span class="o">&gt;</span><span class="o">&gt;</span><span class="o">::</span><span class="i">const_iterator</span> <span class="i">it</span> <span class="o">=</span> <span class="i">myVector</span><span class="o">.</span><span class="k">begin</span>();
  <span class="c">// ...</span>
}

<span class="k">void</span> <span class="i">withTypeInference</span>(<span class="i">std</span><span class="o">::</span><span class="i">vector</span><span class="o">&lt;</span><span class="i">std</span><span class="o">::</span><span class="i">complex</span><span class="o">&lt;</span><span onmouseout="hideTip(event, 'fs8', 48)" onmouseover="showTip(event, 'fs8', 48)" class="i">double</span><span class="o">&gt;</span><span class="o">&gt;</span> <span class="o">&amp;</span> <span class="i">myVector</span>)
{
  <span class="i">auto</span> <span class="i">it</span> <span class="o">=</span> <span class="i">myVector</span><span class="o">.</span><span class="k">begin</span>();
  <span class="c">// ...</span>
}
</code></pre></td>
</tr>
</table>
</section>
<section >
<h3>Advanced <ct>Type Inference</ct></h3>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// F#</span>
<span class="k">type</span> <span class="i">Customer</span> <span class="o">=</span> {
  <span class="i">Id</span><span class="o">:</span> <span class="i">Guid</span>
  <span class="i">Name</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs6', 49)" onmouseover="showTip(event, 'fs6', 49)" class="i">string</span>
  <span class="i">Age</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs4', 50)" onmouseover="showTip(event, 'fs4', 50)" class="i">int</span>
}

<span class="c">// This is equivalent to:</span>
<span class="c">// public Customer createCustomer(string name, int age) {...}</span>
<span class="k">let</span> <span class="i">createCustomer</span> <span class="i">name</span> <span class="i">age</span> <span class="o">=</span>
  {
    <span class="i">Id</span> <span class="o">=</span> <span class="i">Guid</span><span class="o">.</span><span class="i">NewGuid</span>()
    <span class="i">Name</span> <span class="o">=</span> <span class="i">name</span>
    <span class="i">Age</span> <span class="o">=</span> <span class="i">age</span>
  }

<span class="c">// This will generate a compiler error</span>
<span class="k">let</span> <span class="i">newCustomer</span> <span class="o">=</span> <span class="i">createCustomer</span> <span class="n">18</span> <span class="s">&quot;Tomek Nowak&quot;</span>
</code></pre></td>
</tr>
</table>
<p><small><a href="https://en.wikipedia.org/wiki/Hindley%E2%80%93Milner_type_system&lt;/small&gt;">https://en.wikipedia.org/wiki/Hindley%E2%80%93Milner_type_system</small></a></p>
</section>
</section>
<section >
<h4>Part II</h4>
<hr />
<h4><ct>So, do you even type??</ct></h4>
</section>
<section >
<section >
<h4>Let's start with a <ct>simple example</ct></h4>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">public</span> <span class="k">interface</span> <span class="i">ICustomerService</span>
{
  <span class="i">Customer</span> <span class="i">CreateCustomer</span>(<span class="i">CustomerDto</span> <span class="i">dto</span>);
}

<span class="k">public</span> <span class="k">class</span> <span class="i">CustomerService</span> <span class="o">:</span> <span class="i">ICustomerService</span>
{
  <span class="k">public</span> <span class="i">Customer</span> <span class="i">CreateCustomer</span>(<span class="i">CustomerDto</span> <span class="i">dto</span>)
  {
    <span class="c">// implementation here</span>
  }
}
</code></pre></td>
</tr>
</table>
</section>
<section >
<h4>A possible and <ct>plausible</ct> implementation</h4>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">public</span> <span class="i">Customer</span> <span class="i">CreateCustomer</span>(<span class="i">CustomerDto</span> <span class="i">dto</span>)
{
  <span class="i">var</span> <span class="i">isValid</span> <span class="o">=</span> <span class="i">Validate</span>(<span class="i">dto</span>);
  <span class="k">if</span> (<span class="i">isValid</span>)
  {
    <span class="i">var</span> <span class="i">newCustomer</span> <span class="o">=</span> <span class="i">_dbService</span><span class="o">.</span><span class="i">SaveCustomer</span>(<span class="i">dto</span>);
    <span class="k">return</span> <span class="i">newCustomer</span>;
  }
  <span class="k">else</span>
  {
    <span class="k">return</span> <span class="k">null</span>;
  }
}

<span class="k">private</span> <span onmouseout="hideTip(event, 'fs9', 51)" onmouseover="showTip(event, 'fs9', 51)" class="i">bool</span> <span class="i">Validate</span>(<span class="i">CustomerDto</span> <span class="i">dto</span>)
{
  <span class="k">return</span> <span class="i">dto</span><span class="o">.</span><span class="i">Code</span> <span class="o">!=</span> <span class="s">&quot;&quot;</span> <span class="o">&amp;&amp;</span> <span class="i">dto</span><span class="o">.</span><span class="i">Contact</span><span class="o">.</span><span class="i">Email</span><span class="o">.</span><span class="i">IsValid</span>() <span class="o">&amp;&amp;</span> <span class="i">dto</span><span class="o">.</span><span class="i">Age</span> <span class="o">&gt;</span><span class="o">=</span> <span class="n">18</span>;
}
</code></pre></td>
</tr>
</table>
</section>
<section >
<h4><ct>Possible outcomes</ct></h4>
<table>
<thead>
<tr class="header">
<th align="center"><p>value of dto</p></th>
<th align="center"><p>Result of Validate(...)</p></th>
<th align="center"><p>Result of CreateCustomer(...)</p></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><p>not null</p></td>
<td align="center"><p>true</p></td>
<td align="center"><p>new Customer</p></td>
</tr>
<tr class="even">
<td align="center"><p>not null</p></td>
<td align="center"><p>false</p></td>
<td align="center"><ct>null</ct></td>
</tr>
<tr class="odd">
<td align="center"><p>null</p></td>
<td align="center"><ct>throws exception</ct></td>
<td align="center"><p>failure</p></td>
</tr>
</tbody>
</table>

<p>Other possible scenarios:</p>
<ul>
<li>_dbService is <ct>null</ct> -&gt; <ct>throws exception</ct></li>
<li>_dbService <ct>throws exception</ct> -&gt; failure</li>
</ul>
</section>
<section >
<h4>Let's take a <ct>step back</ct></h4>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">public</span> <span class="k">interface</span> <span class="i">ICustomerService</span>
{
  <span class="i">Customer</span> <span class="i">CreateCustomer</span>(<span class="i">CustomerDto</span> <span class="i">dto</span>);
}
</code></pre></td>
</tr>
</table>
<h class="fragment fade-in">
<img src="https://media.giphy.com/media/3oEduX3zdIiqpfPJLO/giphy.gif" style="background: white;" width=540 />
</h>
</section>
<section >
<h4>Just another LOB app</h4>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">public</span> <span class="k">void</span> <span class="i">DisplaySalesReport</span>(<span class="i">DateRangeFilter</span> <span class="i">dateRange</span>)
{
  <span class="i">var</span> <span class="i">canGenerateReport</span> <span class="o">=</span> <span class="i">await</span> <span class="i">authService</span><span class="o">.</span><span class="i">GetPermissions</span>(<span class="i">_session</span><span class="o">.</span><span class="i">GetCurrentUser</span>());
  <span class="k">if</span> (<span class="o">!</span><span class="i">canGenerateReport</span>)
    <span class="k">return</span>;
  
  <span class="i">var</span> <span class="i">salesResults</span> <span class="o">=</span> <span class="i">await</span> <span class="i">_salesService</span><span class="o">.</span><span class="i">GetSalesResults</span>(<span class="i">dateRange</span>, <span class="i">CurrentCountry</span>);
  <span class="i">var</span> <span class="i">products</span> <span class="o">=</span> <span class="i">await</span> <span class="i">_productsService</span><span class="o">.</span><span class="i">RetrieveProductCatalog</span>(<span class="i">dateRange</span><span class="o">.</span><span class="i">Year</span>, <span class="i">ProductCategory</span>);
  <span class="i">var</span> <span class="i">salesReport</span> <span class="o">=</span> <span class="i">await</span> <span class="i">ReportHelper</span><span class="o">.</span><span class="i">GenerateReport</span>(<span class="i">salesResults</span>, <span class="i">products</span>, <span class="i">SelectedCustomers</span>);
  <span class="i">Show</span>(<span class="i">salesReport</span>);
}
</code></pre></td>
</tr>
</table>
</section>
<section >
<h4>A few <ct>bug reports</ct> later...</h4>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
<span class="l">19: </span>
<span class="l">20: </span>
<span class="l">21: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">public</span> <span class="k">void</span> <span class="i">DisplaySalesReport</span>(<span class="i">DateRangeFilter</span> <span class="i">dateRange</span>)
{
  <span class="i">var</span> <span class="i">canGenerateReport</span> <span class="o">=</span> <span class="i">await</span> <span class="i">authService</span><span class="o">.</span><span class="i">GetPermissions</span>(<span class="i">_session</span><span class="o">.</span><span class="i">GetCurrentUser</span>());
  <span class="k">if</span> (<span class="o">!</span><span class="i">canGenerateReport</span>)
    <span class="k">return</span>;
  
  <span class="k">if</span> (<span class="i">dateRange</span> <span class="o">!=</span> <span class="k">null</span> <span class="o">&amp;&amp;</span> <span class="i">dateRange</span><span class="o">.</span><span class="i">Year</span> <span class="o">!=</span> <span class="k">null</span>)
  {
    <span class="i">var</span> <span class="i">salesResults</span> <span class="o">=</span> <span class="i">await</span> <span class="i">_salesService</span><span class="o">.</span><span class="i">GetSalesResults</span>(<span class="i">dateRange</span>, <span class="i">CurrentCountry</span>);
    <span class="i">var</span> <span class="i">products</span> <span class="o">=</span> <span class="i">await</span> <span class="i">_productsService</span><span class="o">.</span><span class="i">RetrieveProductCatalog</span>(<span class="i">dateRange</span><span class="o">.</span><span class="i">Year</span>, <span class="i">ProductCategory</span>);
    <span class="k">if</span> (<span class="i">salesResults</span> <span class="o">==</span> <span class="k">null</span> <span class="o">||</span> <span class="i">products</span> <span class="o">==</span> <span class="k">null</span>)
      <span class="k">return</span>;

    <span class="k">if</span> (<span class="i">SelectedCustomers</span> <span class="o">==</span> <span class="k">null</span>)
      <span class="i">SelectedCustomers</span> <span class="o">=</span> <span class="k">new</span> <span onmouseout="hideTip(event, 'fs10', 52)" onmouseover="showTip(event, 'fs10', 52)" class="i">List</span><span class="o">&lt;</span><span class="i">Customer</span><span class="o">&gt;</span>();
    <span class="i">var</span> <span class="i">salesReport</span> <span class="o">=</span> <span class="i">await</span> <span class="i">ReportHelper</span><span class="o">.</span><span class="i">GenerateReport</span>(<span class="i">salesResults</span>, <span class="i">products</span>, <span class="i">SelectedCustomers</span>);

    <span class="k">if</span> (<span class="i">salesReport</span> <span class="o">!=</span> <span class="k">null</span>)
      <span class="i">Show</span>(<span class="i">salesReport</span>);
  }
}
</code></pre></td>
</tr>
</table>
</section>
<section >
<h4>Slapping a <ct>try-catch</ct> there too, just in case of!</h4>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
<span class="l">19: </span>
<span class="l">20: </span>
<span class="l">21: </span>
<span class="l">22: </span>
<span class="l">23: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">public</span> <span class="k">void</span> <span class="i">DisplaySalesReport</span>(<span class="i">DateRangeFilter</span> <span class="i">dateRange</span>)
{
  <span class="k">try</span>
  {
    <span class="i">var</span> <span class="i">canGenerateReport</span> <span class="o">=</span> <span class="i">await</span> <span class="i">authService</span><span class="o">.</span><span class="i">GetPermissions</span>(<span class="i">_session</span><span class="o">.</span><span class="i">GetCurrentUser</span>());
    <span class="k">if</span> (<span class="o">!</span><span class="i">canGenerateReport</span>) <span class="k">return</span>;
    
    <span class="k">if</span> (<span class="i">dateRange</span> <span class="o">!=</span> <span class="k">null</span> <span class="o">&amp;&amp;</span> <span class="i">dateRange</span><span class="o">.</span><span class="i">Year</span> <span class="o">!=</span> <span class="k">null</span>)
    {
      <span class="i">var</span> <span class="i">salesResults</span> <span class="o">=</span> <span class="i">await</span> <span class="i">_salesService</span><span class="o">.</span><span class="i">GetSalesResults</span>(<span class="i">dateRange</span>, <span class="i">CurrentCountry</span>);
      <span class="i">var</span> <span class="i">products</span> <span class="o">=</span> <span class="i">await</span> <span class="i">_productsService</span><span class="o">.</span><span class="i">RetrieveProductCatalog</span>(<span class="i">dateRange</span><span class="o">.</span><span class="i">Year</span>, <span class="i">ProductCategory</span>);
      <span class="k">if</span> (<span class="i">salesResults</span> <span class="o">==</span> <span class="k">null</span> <span class="o">||</span> <span class="i">products</span> <span class="o">==</span> <span class="k">null</span>) <span class="k">return</span>;

      <span class="k">if</span> (<span class="i">SelectedCustomers</span> <span class="o">==</span> <span class="k">null</span>) <span class="i">SelectedCustomers</span> <span class="o">=</span> <span class="k">new</span> <span onmouseout="hideTip(event, 'fs10', 53)" onmouseover="showTip(event, 'fs10', 53)" class="i">List</span><span class="o">&lt;</span><span class="i">Customer</span><span class="o">&gt;</span>();
      <span class="i">var</span> <span class="i">salesReport</span> <span class="o">=</span> <span class="i">await</span> <span class="i">ReportHelper</span><span class="o">.</span><span class="i">GenerateReport</span>(<span class="i">salesResults</span>, <span class="i">products</span>, <span class="i">SelectedCustomers</span>);

      <span class="k">if</span> (<span class="i">salesReport</span> <span class="o">!=</span> <span class="k">null</span>) <span class="i">Show</span>(<span class="i">salesReport</span>);
    }
  } <span class="i">catch</span> (<span class="i">Exception</span>)
  {
    <span class="i">Log</span><span class="o">.</span><span class="i">Error</span>(<span class="s">&quot;oopsie... I guess we didn&#39;t handle all nulls and exceptions after all...&quot;</span>)
  }
}
</code></pre></td>
</tr>
</table>
</section>
</section>
<section >
<section >
<h4>So now we know what the <ct>problem</ct> is</h4>
<h3><ct>exceptions</ct> and <ct>nulls</ct> make our code <ct>brittle and unreliable</ct></h3>
<p><small><a href="http://www.ybouglouan.pl/2017/05/how-to-efficiently-break-your-code-by-using-exceptions/&lt;/small&gt;">http://www.ybouglouan.pl/2017/05/how-to-efficiently-break-your-code-by-using-exceptions/</small></a></p>
</section>
<section >
<h4>What can we do about it?</h4>
<h class="fragment fade-in">
<h3><ct>Get rid of nulls and exceptions altogether!</ct></h3>
<img src="https://media.giphy.com/media/26ufdipQqU2lhNA4g/giphy.gif" style="background: white;" width=480 />
</h>
</section>
<section >
<h3>Let's see how to achieve this in <ct>3</ct> little steps</h3>
</section>
</section>
<section >
<section >
<h4>Step 1</h4>
<h3>Introducing <ct>sum types</ct> and <ct>pattern matching</ct></h3>
</section>
<section >
<h4><ct>Sum types</ct> can be seen as <ct>enums on steroids</ct>!</h4>
<p>Also called Choice Types, Discriminated Unions, Tagged Unions...<br />
Available in F#, Elm, Haskell, TypeScript, Scala, Rust, Swift...</p>
<h4>Very powerful when combined with <ct>exhaustive pattern matching</ct></h4>
</section>
<section >
<h4><ct>Demo</ct> - sum types and pattern matching</h4>
</section>
<section >
<h4><ct>sum types</ct> and <ct>pattern matching</ct> in a nutshell</h4>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// F#</span>
<span class="k">type</span> <span class="i">EntityId</span> <span class="o">=</span>
  | <span class="i">Customer</span> <span class="k">of</span> <span class="i">customerCode</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs6', 54)" onmouseover="showTip(event, 'fs6', 54)" class="i">string</span>
  | <span class="i">SalesReceipt</span> <span class="k">of</span> <span class="i">documentId</span><span class="o">:</span> <span class="i">Guid</span>
  | <span class="i">Product</span> <span class="k">of</span> <span class="i">productId</span><span class="o">:</span> <span class="i">integer</span>

<span class="k">match</span> <span class="i">entity</span> <span class="k">with</span>
| <span class="i">Customer</span> <span class="i">code</span> <span class="k">-&gt;</span> <span class="c">// the entity is a customer</span>
| <span class="i">SalesReceipt</span> <span onmouseout="hideTip(event, 'fs11', 55)" onmouseover="showTip(event, 'fs11', 55)" class="i">id</span> <span class="k">-&gt;</span> <span class="c">// the entity is a sales receipt</span>
| <span class="i">Product</span> <span onmouseout="hideTip(event, 'fs11', 56)" onmouseover="showTip(event, 'fs11', 56)" class="i">id</span> <span class="k">-&gt;</span> <span class="c">// the entity is a product</span>
<span class="c">// The compiler makes sure you haven&#39;t forgotten a case!</span>
</code></pre></td>
</tr>
</table>
</section>
</section>
<section >
<section >
<h4>Step 2</h4>
<h3>Getting rid of <ct>nulls</ct> using <ct>Option</ct></h3>
<h4>Just a specific <ct>sum type</ct> with 2 cases!</h4>
</section>
<section >
<h4><ct>Option</ct> makes the <ct>possible absence</ct> of value <ct>explicit</ct></h4>
<h4>You have to deal with it at <ct>compile time</ct></h4>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// F#</span>
<span class="k">type</span> <span onmouseout="hideTip(event, 'fs12', 57)" onmouseover="showTip(event, 'fs12', 57)" class="i">Option</span><span class="o">&lt;</span><span class="o">&#39;</span><span class="i">a</span><span class="o">&gt;</span> <span class="o">=</span>
  | <span onmouseout="hideTip(event, 'fs13', 58)" onmouseover="showTip(event, 'fs13', 58)" class="i">Some</span> <span class="k">of</span> <span class="o">&#39;</span><span class="i">a</span>
  | <span onmouseout="hideTip(event, 'fs14', 59)" onmouseover="showTip(event, 'fs14', 59)" class="i">None</span>
</code></pre></td>
</tr>
</table>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// Haskell and Elm</span>
<span class="i">data</span> <span class="i">Maybe</span> <span class="i">a</span> <span class="o">=</span> <span class="i">Just</span> <span class="i">a</span> | <span class="i">Nothing</span>
</code></pre></td>
</tr>
</table>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// Rust</span>
<span onmouseout="hideTip(event, 'fs15', 60)" onmouseover="showTip(event, 'fs15', 60)" class="i">enum</span> <span onmouseout="hideTip(event, 'fs12', 61)" onmouseover="showTip(event, 'fs12', 61)" class="i">Option</span><span class="o">&lt;</span><span class="i">T</span><span class="o">&gt;</span> {
  <span onmouseout="hideTip(event, 'fs14', 62)" onmouseover="showTip(event, 'fs14', 62)" class="i">None</span>,
  <span onmouseout="hideTip(event, 'fs13', 63)" onmouseover="showTip(event, 'fs13', 63)" class="i">Some</span>(<span class="i">T</span>),
}
</code></pre></td>
</tr>
</table>
</section>
<section >
<h4><ct>Demo</ct> - fix nulls using Option</h4>
</section>
<section >
<h4><ct>Option</ct> in a nutshell</h4>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
<span class="l">8: </span>
<span class="l">9: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// F#</span>
<span class="k">type</span> <span class="i">Contact</span> <span class="o">=</span> {
  <span class="i">Email</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs6', 64)" onmouseover="showTip(event, 'fs6', 64)" class="i">string</span>
  <span class="i">PhoneNumber</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs6', 65)" onmouseover="showTip(event, 'fs6', 65)" class="i">string</span> <span onmouseout="hideTip(event, 'fs16', 66)" onmouseover="showTip(event, 'fs16', 66)" class="i">option</span> <span class="c">// Explicilty mark the phone number as not mandatory</span>
}

<span class="k">match</span> <span class="i">contact</span><span class="o">.</span><span class="i">PhoneNumber</span> <span class="k">with</span>
| <span onmouseout="hideTip(event, 'fs13', 67)" onmouseover="showTip(event, 'fs13', 67)" class="i">Some</span> <span class="i">phoneNumber</span> <span class="k">-&gt;</span> <span class="c">// deal with the phone number</span>
| <span onmouseout="hideTip(event, 'fs14', 68)" onmouseover="showTip(event, 'fs14', 68)" class="i">None</span> <span class="k">-&gt;</span> <span class="c">// deal with the absence of phone number</span>
</code></pre></td>
</tr>
</table>
</section>
</section>
<section >
<section >
<h4>Step 3</h4>
<h3>Getting rid of <ct>exceptions</ct> using <ct>Result</ct></h3>
<h4>Yet another <ct>sum type</ct>!</h4>
</section>
<section >
<h4><ct>Result</ct> makes both the <ct>success</ct> and <ct>error</ct> path <ct>explicit</ct></h4>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// F#</span>
<span class="k">type</span> <span class="i">Result</span><span class="o">&lt;</span><span class="o">&#39;</span><span class="i">T</span>, <span class="o">&#39;</span><span class="i">Error</span><span class="o">&gt;</span> <span class="o">=</span>
  | <span class="i">Ok</span> <span class="k">of</span> <span class="o">&#39;</span><span class="i">T</span>
  | <span class="i">Error</span> <span class="k">of</span> <span class="o">&#39;</span><span class="i">TError</span>
</code></pre></td>
</tr>
</table>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// OCaml</span>
<span class="k">type</span> (<span class="o">&#39;</span><span class="i">a</span>, <span class="o">&#39;</span><span class="i">b</span>) <span class="i">result</span> <span class="o">=</span> <span class="i">Ok</span> <span class="k">of</span> <span class="o">&#39;</span><span class="i">a</span> | <span class="i">Error</span> <span class="k">of</span> <span class="o">&#39;</span><span class="i">b</span> <span class="k">type</span>
</code></pre></td>
</tr>
</table>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// Rust</span>
<span onmouseout="hideTip(event, 'fs15', 69)" onmouseover="showTip(event, 'fs15', 69)" class="i">enum</span> <span class="i">Result</span><span class="o">&lt;</span><span class="i">T</span>, <span class="i">E</span><span class="o">&gt;</span> {
  <span class="i">Ok</span>(<span class="i">T</span>),
  <span class="i">Err</span>(<span class="i">E</span>),
}
</code></pre></td>
</tr>
</table>
</section>
<section >
<h4><ct>Demo</ct> - fix exceptions using Result</h4>
</section>
<section >
<h4><ct>Result</ct> in a nutshell</h4>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// F#</span>
<span class="c">// Result&lt;Customer, string&gt; validateCustomer(Customer customer) {...}</span>
<span class="k">let</span> <span class="i">validateCustomer</span> <span class="i">customer</span> <span class="o">=</span>
  <span class="k">if</span> <span class="i">customer</span><span class="o">.</span><span class="i">Code</span> <span class="o">&lt;&gt;</span> <span class="s">&quot;&quot;</span> <span class="o">&amp;&amp;</span> <span class="i">customer</span><span class="o">.</span><span class="i">Age</span> <span class="o">&gt;</span><span class="o">=</span> <span class="n">18</span> <span class="k">then</span>
       <span class="i">Ok</span> <span class="i">customer</span>
  <span class="k">else</span>
      <span class="i">Error</span> <span class="s">&quot;the customer is not valid!&quot;</span>
</code></pre></td>
</tr>
</table>
<p>Enables Railway-Oriented Programming
<a href="https://fsharpforfunandprofit.com/rop/">https://fsharpforfunandprofit.com/rop/</a></p>
</section>
</section>
<section >
<section >
<h3><ct>That's it!</ct></h3>
<h4>What did we achieve?</h4>
</section>
<section >
<h4><ct>Direct outcomes</ct></h4>
<ul>
<li>no more null checks everywhere</li>
<li>no more exceptions and try-catches everywhere</li>
</ul>
</section>
<section >
<h4><ct>Indirect outcomes</ct></h4>
<ul>
<li><ct>no more lies!</ct></li>
<li>our models are more expressive (<ct>Option</ct>)</li>
<li>our code is more readable and explicit (<ct>Result</ct>)</li>
<li>the compiler is our friend -&gt; <ct>"if it compiles, then it works"</ct></li>
<li><ct>TDD!</ct></li>
</ul>
<p class="fragment fade-in"><small>*Type Driven Development</small></p>
</section>
<section >
<h3><ct>Where to go from here?</ct></h3>
<h4><ct>Learn new languages</ct> (Elm, Elixir, F#, Rust, TypeScript)</h4>
<h4><ct>Explore new concepts</ct> (FP, Actor Model...)</h4>
</section>
<section >
<h3><ct>Thank You!</ct></h3>
</section>
</section>


        </div>
    </div>
    <script src="lib/js/head.min.js"></script>
    <script src="js/reveal.js"></script>
    <script>
        // Add the nohighlight class and data-noescape attribute to code elements that have already been formatted by FSharp.Formatting
        $('pre.highlighted code').addClass('nohighlight').attr('data-noescape', '');

        // Full list of configuration options available here:
        // https://github.com/hakimel/reveal.js#configuration
        Reveal.initialize({
            controls: true,
            progress: true,
            history: true,
            center: true,

            transition: 'default', // default/cube/page/concave/zoom/linear/fade/none

            // Parallax scrolling
            // parallaxBackgroundImage: 'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg',
            // parallaxBackgroundSize: '2100px 900px',

            // Optional libraries used to extend on reveal.js
            dependencies: [
                { src: 'lib/js/classList.js', condition: function () { return !document.body.classList; } },
                { src: 'plugin/markdown/marked.js', condition: function () { return !!document.querySelector('[data-markdown]'); } },
                { src: 'plugin/markdown/markdown.js', condition: function () { return !!document.querySelector('[data-markdown]'); } },
                { src: 'plugin/highlight/highlight.js', async: true, callback: function () { hljs.initHighlightingOnLoad(); } },
                { src: 'plugin/zoom-js/zoom.js', async: true, condition: function () { return !!document.body.classList; } },
                { src: 'plugin/notes/notes.js', async: true, condition: function () { return !!document.body.classList; } }
            ]
        });

    </script>
</body>
</html>

